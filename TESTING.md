# Testing

## Test Driven Development with JEST

A test driven development approach was taken in order to develop the game. This was done by utilising the JEST testing suite.
Tests were built and validated prior to building core game functionality.

During the course of developing the game, limitations with the JEST test suite were encountered.
This is likely related to the way I have written my code and this will therefore be a consideration for future projects.
In order to evaluate the limitations, an explanation of how the code functions is required. This is detailed in the following section.

### Code Functionality Explanation

- In vex-vex.html, the buttons where the clickable flag images are displayed have respective IDs "option1" and "option2".

![Button IDs HTML](documentation/testing/vex-vex-flag-button-id-html.png)

- In vex-vex.js, two functions (optionGen and changeIds) run once the DOM content of vex-vex.html has loaded.

![DOM Content Loaded](documentation/testing/vex-vex-dom-content-load-functions.png)

- optionGen randomly selects two different flag IDs from game.database.flags and changeIds replaces the IDs of the clickable button elements with the flag IDs generated by optionGen.

![optionGen](documentation/testing/vex-vex-option-gen-code.png)

![changeIDs](documentation/testing/vex-vex-change-ids-code.png)

- Once the functions optionGen and changeIds have run, the clickable buttons in vex-vex.html will no longer have the IDs "option1" and "option2" but they will have the values of game.option1 and game.option2 respectively. The values of game.option1 and game.option2 will correspond to a three letter country code e.g. 'wal' for Wales. This three letter country code matches a CSS ID e.g. #wal which styles the clickable button with an image of the Welsh flag.

![Welsh Flag ID Update](documentation/testing/vex-vex-id-update-wal.png)

![Welsh Flag CSS ID](documentation/testing/vex-vex-css-wal-id.png)

- The next step is for the player to attempt to guess the correct flag by clicking on one of the buttons.
- When this occurs, the checkAnswer function runs. The checkAnswer function's role is to check if the player's guess is correct or incorrect, however, additional functions run as part of the checkAnswer function.
- One of these functions is revertIds which runs before optionGen and changeIds run again within the checkAnswer function.

![revertIds Function](documentation/testing/vex-vex-revert-ids-code.png)
![revertIds Within checkAnswer](documentation/testing/vex-vex-functions-within-check-answer.png)

- revertIds changes the IDs of the clickable buttons from the values of game.option1 and game.option2 back to their original IDs of "option1" and "option2" e.g. the ID of one of the buttons would be updated from "wal" back to "option1".
- This allows changeIds to 'find' the button elements and update their respective IDs to new game.option1 and game.option2 values generated by optionGen for the next question in the game.
- This means that an example flow of the button elements' IDs would be "option1" -> "wal" -> "option1" -> "nzl". This would represent question 1 displaying the Welsh flag and question 2 displaying a New Zealand flag.
- The transition from an ID of "wal" -> "option1" -> "nzl" is seamless and it looks like an instant transition from "wal" to "nzl" however the method of achieving this has caused issues when running the JEST test suite.

### Test Limitations Discussion

Based on the above description of code functionality, I was unable to test if the functions optionGen and changeIDs worked in the desired way solely within the test suite. This is because the test was never able to find HTML elements with the IDs of "option1" or "option2".
The reason for this is that by the time the page had loaded, the below code had executed meaning that the IDs had already changed to values such as 'wal' and 'nzl'.

![DOM Content Loaded](documentation/testing/vex-vex-dom-content-load-functions.png)

This meant that the tests always failed despite the game functioning exactly as expected when looking at information in the console.

The next issue I encountered was that the test suite would not run at all unless I commented out the below code.

![Code Needing Commenting Out For Test Suite To Work](documentation/testing/vex-vex-code-needing-commenting-out-for-test-functionality.png)

When attempting to run the code without commenting this code out, the below was returned.

![Test Suite Error](documentation/testing/vex-vex-test-error-message.png)

When I commented this code out before running the tests, the following results were achieved.

![Code Commented Out](documentation/testing/vex-vex-code-commented-out-for-test-functionality.png)

![Tests Passing](documentation/testing/vex-vex-tests-passed.png)

Unfortunately, this code is essential to the functionality of the game so it cannot be removed from the vex-vex.js file permanently.

Again, I believe the reason for this test suite failure is due to the fact that elements with IDs of "option1" and "option2" only exist transiently in my code which means that the tests cannot 'find' these IDs which leads to test failures.

Despite the afforementioned test issues, the game functions exactly as desired and this is verified by observing the console whilst playing the game.
In future projects, I will keep these learnings in mind and this will help me devlop my code writing skills to ensure that these issues do not arise again.

## Browser Compatibility

The game website has been successfully tested on the following browsers:
- Chrome
- Edge
- Safari (on personal mobile device - iPhone 11 Pro)

__Chrome Screenshots__

- Chrome Desktop Landing Page

![Landing Page](documentation/testing/vex-vex-chrome-desktop-landing-page.png)

- Chrome Desktop Game Page

![Game Page](documentation/testing/vex-vex-chrome-desktop-game-page.png)

- Chrome Desktop Results Summary Page

![Results Summary Page](documentation/testing/vex-vex-chrome-desktop-results-summary-page.png)

__Edge Screenshots__

- Edge Desktop Landing Page

![Landing Page](documentation/testing/vex-vex-edge-desktop-landing-page.png)

- Edge Desktop Game Page

![Game Page](documentation/testing/vex-vex-edge-desktop-game-page.png)

- Edge Desktop Results Summary Page

![Results Summary Page](documentation/testing/vex-vex-edge-desktop-results-summary-page.png)

__Safari (Mobile) Screenshots__

- Safari Mobile Landing Page

![Landing Page](documentation/testing/vex-vex-safari-mobile-landing-page.png)

- Safari Mobile Game Page

![Game Page](documentation/testing/vex-vex-safari-mobile-game-page.png)

- Safari Mobile Results Summary Page

![Results Summary Page](documentation/testing/vex-vex-safari-mobile-results-summary-page.png)

## Code Validation

### HTML

No errors were returned on any page when passing through the official W3C Validator as shown in the links below.
  - [W3C Validator Landing Page](https://validator.w3.org/nu/?doc=https%3A%2F%2Fsniclasj.github.io%2Fvexillological-vexation%2Findex.html)

  ![Landing Page Validation](documentation/testing/vex-vex-landing-page-validation.png)

  - [W3C Validator Game Page](https://validator.w3.org/nu/?doc=https%3A%2F%2Fsniclasj.github.io%2Fvexillological-vexation%2Fvex-vex.html)

  ![Game Page Validation](documentation/testing/vex-vex-game-page-validation.png)

  - [W3C Validator Results Summary Page](https://validator.w3.org/nu/?doc=https%3A%2F%2Fsniclasj.github.io%2Fvexillological-vexation%2Ffinished.html)

  ![Finished Page Validdation](documentation/testing/vex-vex-finished-page-validation.png)

### Semantic HTML Discussion

I have intentionally decided not to use sections in my HTML files. The reason for this is that when I was utilising sections, the HTML validators referenced above were issuing warning regarding the lack of headings in my sections. Although I am aware that I should be utilising sections as opposed to divs in order to be to semantically correct, the presence of section headings would detract from the desired aesthetic of my game therefore I have opted to maintain the use of divs and explain my reasoning here.

### CSS

No errors or warnings were found on any page when passing through the official [(Jigsaw) validator](https://jigsaw.w3.org/css-validator/validator?uri=https%3A%2F%2Fsniclasj.github.io%2Fvexillological-vexation%2Findex.html&profile=css3svg&usermedium=all&warning=1&vextwarning=&lang=en#warnings) as shown in the screenshot below.

![CSS Validator](documentation/testing/vex-vex-css-validation.png)

### JavaScript

_JS Hint Results: Landing Page_

![JS Hint Landing Page](documentation/testing/vex-vex-js-hint-landing-page.png)

_JS Hint Results: Game Page_

![JS Hint Game Page]()

_JS Hint Results: Finished Page_

![JS Hint Finished Page](documentation/testing/vex-vex-js-hint-results-summary-page.png)

### Lighthouse

__Test Results: Landing Page__

![Landing Page Lighthouse Results](documentation/testing/vex-vex-lighthouse-landing-page.png)

__Test Results: Game Page__

![Game Page Lighthouse Results](documentation/testing/vex-vex-lighthouse-game-page.png)

__Test Results: Results Summary__

![Results Summary Lighthouse Results](documentation/testing/vex-vex-lighthouse-results-summary-page.png)

The only issue highlighted in the Lighthouse testing is the use of the .gif format on the animated content on the Results Summary Page. The report has suggested utilising a video format such as .mp4 instead, however, I could only find the animated content I wanted to use in .gif format.
In future, I will filter my search for animated content to ensure that the .gif format is omitted.

## Responsiveness

__Landing Page__

Large

![Landing Page Large](documentation/testing/vex-vex-responsiveness-landing-page-large.png)

Medium and Below

![Landing Page Medium](documentation/testing/vex-vex-responsiveness-landing-page-medium-and-below.png)

__Game Page__

Large

![Game Page Large](documentation/testing/vex-vex-responsiveness-game-page-large.png)

Medium and Below

![Game Page Medium](documentation/testing/vex-vex-responsiveness-game-page-medium-and-below.png)

__Results Summary Page__

Large

![Results Summary Large](documentation/testing/vex-vex-responsiveness-results-summary-page-large.png)

Medium and Below

![Results Summary Medium](documentation/testing/vex-vex-responsiveness-results-summary-page-medium-and-below.png)

## User Story Tests

- As a user, I want to be able to read about how to play the game before playing.
- As a user, I want to be able to initiate the start of the game myself.

![Landing Page](documentation/testing/vex-vex-chrome-desktop-landing-page.png)

- As a user, I want to be able to intuitively know where to click to make my flag selection.
- As a user, I want to be able to see my performance within the game e.g. how many questions have I got correct/incorrect so far.

![Game Page](documentation/testing/vex-vex-chrome-desktop-game-page.png)

- As a user, I want to be able to avoid repetition of flags I have already guessed correctly. Note: The screenshot below shows how correctly guessed flag IDs are removed from the original array of 50 and stored in a separate array called 'used flags'.

![Repetition Avoidance](documentation/testing/vex-vex-console-showing-repetition-avoidance.png)

- As a user, I want to be able to view the site on any device, so that I can see it on my phone, tablet, or desktop.

![Responsive Mockup](documentation/testing/vex-vex-responsive-mock-up.png)

## Unfixed Bugs

There are no unfixed bugs that I am aware of within the game.